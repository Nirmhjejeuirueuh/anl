---
// Reusable Image Modal Component
// Provides a full-screen modal for viewing images with captions
---

<!-- Image Modal -->
<div id="imageModal" class="fixed inset-0 z-50 hidden" style="background-color: rgba(0, 0, 0, 0.9);">
  <div class="relative w-full h-full flex flex-col items-center justify-center p-4">
    <!-- Close button -->
    <button
      onclick="closeImageModal()"
      class="absolute top-4 right-4 text-white text-4xl hover:text-gray-300 z-10 w-12 h-12 flex items-center justify-center bg-black/80 rounded-full transition-colors duration-200"
      aria-label="Close modal"
    >
      &times;
    </button>

    <!-- Image container -->
    <div class="relative max-w-full max-h-[80vh]">
      <img
        id="modalImage"
        src=""
        alt=""
        class="max-w-full max-h-full object-contain rounded-lg shadow-2xl"
      />
    </div>

    <!-- Description -->
    <div id="modalDescription" class="text-white/80 text-center mt-4 max-w-4xl px-4 text-base"></div>

    <!-- Navigation arrows (optional, for future carousel functionality) -->
    <button
      id="prevButton"
      class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white text-3xl hover:text-gray-300 z-10 w-12 h-12 flex items-center justify-center bg-black/80 rounded-full transition-colors duration-200 opacity-0"
      aria-label="Previous image"
    >
      &#8249;
    </button>

    <button
      id="nextButton"
      class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white text-3xl hover:text-gray-300 z-10 w-12 h-12 flex items-center justify-center bg-black/80 rounded-full transition-colors duration-200 opacity-0"
      aria-label="Next image"
    >
      &#8250;
    </button>
  </div>
</div>

<script is:inline>
  // Global functions for opening and closing the image modal
  window.openImageModal = function(imageUrl, caption = '', altText = '', description = '') {
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    const modalDescription = document.getElementById('modalDescription');

    if (modal && modalImage && modalDescription) {
      modalImage.src = imageUrl;
      modalImage.alt = altText || caption || 'Image';
      modalDescription.textContent = description;
      modal.classList.remove('hidden');

      // Prevent body scroll when modal is open
      document.body.style.overflow = 'hidden';
    }
  }

  window.closeImageModal = function() {
    const modal = document.getElementById('imageModal');
    if (modal) {
      modal.classList.add('hidden');
      // Restore body scroll
      document.body.style.overflow = 'auto';
    }
  }

  // Close modal when clicking outside the image
  document.addEventListener('DOMContentLoaded', function() {
    const modal = document.getElementById('imageModal');
    if (modal) {
      modal.addEventListener('click', function(e) {
        if (e.target === this) {
          window.closeImageModal();
        }
      });
    }
  });

  // Close modal with Escape key
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      window.closeImageModal();
    }
  });
</script>