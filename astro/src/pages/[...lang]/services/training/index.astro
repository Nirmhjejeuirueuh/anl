---
import ProgramPageTemplate from "@/components/ProgramPageTemplate.astro";
import { getTrainings } from "@/lib/utils/strapiApi";
import { generatePaths } from "@/lib/utils/i18nUtils.ts";

export function getStaticPaths() {
  return generatePaths();
}

export const prerender = false;

// Fetch trainings from Strapi
// Pass Astro.request to enable hard refresh detection
const strapiTrainings = await getTrainings(Astro.request);

// Mock index page data
const indexData = {
  title: "Professional Training & Development",
  subtitle: "Comprehensive training solutions for your organization's development needs",
  metaDescription: "AgileN Lite offers diverse training programs including bespoke programmes, funded programmes, video podcasts, and partner programmes.",
  description: "AgilenLite delivers practical, results-driven training to equip organisations and individuals with the skills needed in today's evolving digital landscape.\n\nOur programmes use real-world case studies, simulations, role-play, and practical assignments to ensure immediate workplace relevance."
};
---

<ProgramPageTemplate
  title={indexData.title}
  subtitle={indexData.subtitle}
  metaDescription={indexData.metaDescription}
  description={indexData.description}
  programs={strapiTrainings}
  basePath="/services/training"
  label="Training Programs"
  lang={Astro.params.lang}
/>